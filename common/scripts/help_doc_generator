#!/usr/bin/env bash
#
# This script generates the help documentation for all scripts.
#
cat >usage.md <<'EOF'
# Quickstart Scripts Usage Reference

This documentation is automatically generated by running each script
with the `--help` command line argument.

EOF

for script in $(cd scripts; ls *.??); do
    echo generating documentation for $script
    echo "## $script" >>usage.md
    echo '```' >>usage.md
    ./scripts/$script --help >>usage.md
    if [[ $script =~ ^get_access_token\.[[:alpha:]]+ ]] ; then
        export PINTEREST_APP_ID=a
        export PINTEREST_APP_SECRET=s 
        echo "  special handling for get_access_token help"
        echo '```' >>usage.md
        echo '```' >>usage.md
         ./scripts/$script -v3 -s help -l 0 >>usage.md
        echo '```' >>usage.md
        echo '```' >>usage.md
        ./scripts/$script -v5 -s help -l 0 >>usage.md 
    fi
    echo '```' >>usage.md
done
